# FMS

## 네트워크 세팅
로봇과 관제 PC가 서로 다른 공간에 있음을 가정하기에 가상 네트워크 활용하기로 함

## ZeroTier를 활용
 - 네트워크 생성
 - 실험용 Robot 역할 노트북과 관제 노트북 연결
 - 각 장치에 할당된 IP 확인

## MQTT 설정
'''
MQTT(Message Queuing Telemetry Transport)는 경량 메시지 프로토콜로, 주로 IoT 장치 간의 데이터 전송에 적합한 프로토콜입니다. MQTT는 네트워크 대역폭과 전력 소비를 줄이기 위해 설계되어, 센서, 모니터링 장치, 모바일 애플리케이션과 같은 네트워크 환경이 불안정하거나 자원이 제한된 기기들 간의 통신에 널리 사용됩니다.

MQTT의 주요 특징
발행-구독 모델 (Publish-Subscribe)

MQTT는 발행-구독(Pub/Sub) 방식의 통신 모델을 사용하여, 클라이언트가 서로 직접 연결되는 대신 브로커를 통해 데이터를 전송합니다. 발행자(Publisher)는 특정 주제(Topic)에 메시지를 발행하고, 구독자(Subscriber)는 특정 주제를 구독하여 데이터를 수신합니다. 이 방식은 다수의 장치가 연결되어야 하는 IoT 환경에서 효율적입니다.
브로커 (Broker)

MQTT 브로커는 발행자와 구독자 간의 중개 역할을 합니다. 발행자는 브로커에 메시지를 보내고, 브로커는 해당 메시지를 구독자들에게 전달합니다. 대표적인 MQTT 브로커로는 Mosquitto, EMQX, HiveMQ 등이 있습니다.
QoS (Quality of Service)

MQTT는 3가지 QoS 레벨을 지원합니다:
QoS 0: 메시지가 한 번만 전송되며, 전달 여부가 보장되지 않습니다. (최소 보장)
QoS 1: 메시지가 적어도 한 번 전달됩니다. 전송 성공 여부를 확인하기 위한 확인 응답이 요구됩니다. (보통 보장)
QoS 2: 메시지가 정확히 한 번만 전달됩니다. 이중 확인 절차를 통해 중복 없이 안전하게 전송됩니다. (최대 보장)
저전력 및 저용량 프로토콜

MQTT는 매우 가벼운 프로토콜로, TCP 연결을 기반으로 연결 유지비용이 적고 패킷 크기가 작아 제한된 대역폭 환경에 적합합니다. IoT와 같은 자원이 제한된 환경에서 효과적입니다.
유지 연결 (Keep Alive)

MQTT는 지속적인 연결을 유지하며, 주기적으로 ‘PINGREQ’ 패킷을 보내어 연결 상태를 점검합니다. 연결이 끊기면 자동으로 재연결을 시도해 통신의 신뢰성을 높입니다.
유연한 주제 구조

주제는 계층 구조를 가지며, ‘/’로 구분하여 하위 주제에 대한 구독이 가능합니다. 예를 들어, home/sensors/temperature와 같은 형식으로 특정 환경에 따라 세분화할 수 있습니다. 와일드카드(+, #)를 사용하여 다중 계층을 구독하는 것도 가능합니다.
저장된 메시지 (Retained Message)

발행된 메시지가 브로커에 저장되어, 새로운 구독자가 접속할 때 가장 최근의 메시지를 즉시 받을 수 있도록 지원합니다.
MQTT 통신 흐름 예시
브로커 실행: 서버나 클라우드에서 MQTT 브로커를 실행합니다.
구독자 연결 및 주제 구독: 구독자가 브로커에 연결해 sensor/data 주제를 구독합니다.
발행자 메시지 발행: 발행자가 sensor/data 주제에 데이터를 발행합니다.
브로커 전달: 브로커가 해당 주제를 구독 중인 모든 구독자에게 메시지를 전달합니다.
구독자 메시지 수신: 구독자가 브로커로부터 메시지를 수신하고 데이터를 처리합니다.
MQTT의 활용 예
스마트 홈: 온도 센서, 조명, 보안 카메라와 같은 장치가 실시간 상태를 브로커로 전송하고, 모바일 앱이나 제어 장치가 이를 구독하여 제어합니다.
산업 자동화: 기계의 상태 모니터링 및 알람 시스템을 통해 장애 발생 시 빠르게 대처할 수 있도록 지원합니다.
스마트 시티: 교통량, 대기질 센서 등의 데이터를 실시간으로 수집하여 스마트 시티 관리 시스템에 정보를 제공하고, 이를 통해 교통 관리나 환경 모니터링을 수행합니다.
MQTT는 특히 로봇과 같은 장치에서 네트워크 대역폭을 절약하면서 실시간 데이터를 주고받는 데 유리하므로, 현재 설정 중인 로봇 프로젝트에도 적합한 선택이 될 수 있습니다.
'''
